(this["webpackJsonppear-transfer"]=this["webpackJsonppear-transfer"]||[]).push([[0],{148:function(n,e,t){n.exports={transfer:"Transfer_transfer__1iUHv"}},161:function(n,e,t){},162:function(n,e,t){},169:function(n,e){function t(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=169},176:function(n,e){},178:function(n,e){},188:function(n,e){},190:function(n,e){},217:function(n,e){},219:function(n,e){},220:function(n,e){},225:function(n,e){},227:function(n,e){},233:function(n,e){},235:function(n,e){},254:function(n,e){},266:function(n,e){},269:function(n,e){},279:function(n,e,t){"use strict";t.r(e);var c,r=t(0),i=t.n(r),o=t(27),a=t.n(o),s=(t(161),t(49)),u=t(6),l=(t(162),t(84)),j=t.n(l),f=t(144),d=t(88),b=t(33),h=t(85),O=t(59),p=t(146),x=t.n(p),v=t(147),m=t.n(v),g=new Map;function w(n,e){console.log("Registering ".concat(n.peer));var t=n.peer;n.on("data",(function(n){return function(n,e){console.log("Received data ".concat(n));var t=new Blob([n.file],{type:n.filetype}),c=URL.createObjectURL(t),r=n.filename,i=new k(r,c);e(_(i))}(n,e)})),n.on("open",(function(){console.log("New connection opened")})),g.set(t,n),e(F(t))}function y(n){console.log("New peer");var e=function(){var n=m.a.generate({length:5,charset:"alphanumeric",capitalization:"uppercase",readable:!0});return"Pear-".concat(n)}();(c=new x.a(e,{secure:!0})).on("open",(function(e){n(U(e))})),c.on("connection",(function(e){w(e,n)})),c.on("close",(function(){n(P())}))}var C=t(304),k=function n(e,t){Object(h.a)(this,n),this.name=void 0,this.url=void 0,this.name=e,this.url=t},S=function n(e,t,c){Object(h.a)(this,n),this.id=void 0,this.name=void 0,this.url=void 0,this.id=e,this.name=t,this.url=c},N=Object(O.b)({name:"counter",initialState:{id:"",connections:[],files:[]},reducers:{setId:function(n,e){n.id=e.payload},newConnection:function(n,e){n.connections.push(e.payload)},disconnect:function(n){n.connections=[],n.id=""},addFile:function(n,e){var t=e.payload,c=Object(C.a)(),r=new S(c,t.name,t.url);n.files.push(r)}}}),R=N.actions,U=R.setId,F=R.newConnection,P=R.disconnect,_=R.addFile,A=function(n){return function(e){return function(n,e){if(void 0!=c){var t=c.connect(n);console.log("Connecting to ".concat(n)),w(t,e)}}(n,e)}},B=function(n,e){return function(t){return function(n,e,t){n.map((function(n){var t=g.get(n);void 0!=t&&(console.log("Sending file ".concat(e.name," to ").concat(n)),t.send({file:e,filename:e.name,filetype:e.type}))}))}(n,e)}},L=function(n){return n.transfer.id},M=function(n){return n.transfer.connections},E=function(n){return n.transfer.files},I=N.reducer,T=t(148),D=t.n(T),G=t(3);function H(){var n=Object(b.c)(L),e=Object(b.c)(M),t=Object(b.c)(E),c=Object(b.b)(),i=Object(r.useState)(""),o=Object(d.a)(i,2),a=o[0],s=o[1],l=Object(r.useState)(""),h=Object(d.a)(l,2),O=(h[0],h[1],Object(u.f)().search),p=(new URLSearchParams(O).get("id"),function(){var n=Object(f.a)(j.a.mark((function n(t){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null!=t&&null!=(r=t.item(0))&&c(B(e,r));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return Object(G.jsxs)("div",{className:D.a.transfer,children:[Object(G.jsx)("h1",{children:"Peer transfer"}),Object(G.jsxs)("div",{children:[n||"Please click 'Create pear'",Object(G.jsx)("br",{}),Object(G.jsx)("button",{onClick:function(){return c((function(n){return y(n)}))},children:"Create pear"}),Object(G.jsx)("br",{}),Object(G.jsx)("input",{type:"text",placeholder:"Other person's id",onChange:function(n){return s(n.target.value)}}),Object(G.jsx)("br",{}),Object(G.jsx)("button",{onClick:function(n){return c(A(a))},children:"Connect"}),Object(G.jsx)("br",{}),e.map((function(n,e){return Object(G.jsx)("div",{children:n},e)})),Object(G.jsx)("br",{}),Object(G.jsx)("br",{}),Object(G.jsxs)("label",{children:["File upload",Object(G.jsx)("br",{}),Object(G.jsx)("input",{type:"file",onChange:function(n){return p(n.target.files)}})]}),Object(G.jsx)("br",{}),Object(G.jsx)("p",{children:"Files"}),Object(G.jsx)("br",{}),t.map((function(n,e){return Object(G.jsx)("div",{children:Object(G.jsx)("a",{href:n.url,download:n.name,children:n.name})},n.id)}))]})]})}var J=t(305),W=t(155),z=t(154),$=t.n(z),q=t(153),K=t.n(q),Q=Object(J.a)(Object(W.a)({palette:{primary:{main:K.a.A700},secondary:{main:$.a.A700}}})),V=t(300);function X(){return Object(G.jsx)("div",{children:Object(G.jsx)("h1",{children:"About"})})}var Y=t(299),Z=t(306),nn=t(301),en=t(303),tn=t(302),cn=Object(Y.a)((function(n){return{root:{flexGrow:1},menuButton:{marginRight:n.spacing(2)},title:{flexGrow:1}}}));var rn=function(){var n=cn();return Object(G.jsx)("div",{children:Object(G.jsx)(i.a.StrictMode,{children:Object(G.jsx)(V.a,{theme:Q,children:Object(G.jsxs)(s.a,{children:[Object(G.jsx)(Z.a,{position:"static",children:Object(G.jsxs)(nn.a,{children:[Object(G.jsx)(tn.a,{variant:"h6",className:n.title,children:"Pear Transfer"}),Object(G.jsx)(s.b,{to:"/",children:Object(G.jsx)(en.a,{children:"Home"})}),Object(G.jsx)(s.b,{to:"/about",children:Object(G.jsx)(en.a,{children:"About"})})]})}),Object(G.jsxs)(u.c,{children:[Object(G.jsx)(u.a,{path:"/about",children:Object(G.jsx)(X,{})}),Object(G.jsx)(u.a,{path:"/",children:Object(G.jsx)(H,{})})]})]})})})})},on=Object(O.a)({reducer:{transfer:I}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(278);a.a.render(Object(G.jsx)(i.a.StrictMode,{children:Object(G.jsx)(b.a,{store:on,children:Object(G.jsx)(rn,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[279,1,2]]]);
//# sourceMappingURL=main.8a140531.chunk.js.map