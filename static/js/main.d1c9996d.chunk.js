(this["webpackJsonppear-transfer"]=this["webpackJsonppear-transfer"]||[]).push([[0],{153:function(e,n,t){e.exports={transfer:"Transfer_transfer__1iUHv"}},158:function(e,n,t){e.exports={about:"About_about__1A6NA"}},166:function(e,n,t){},167:function(e,n,t){},174:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=174},181:function(e,n){},183:function(e,n){},193:function(e,n){},195:function(e,n){},222:function(e,n){},224:function(e,n){},225:function(e,n){},230:function(e,n){},232:function(e,n){},238:function(e,n){},240:function(e,n){},259:function(e,n){},271:function(e,n){},274:function(e,n){},284:function(e,n,t){"use strict";t.r(n);var c,r=t(0),i=t.n(r),o=t(20),a=t.n(o),s=(t(166),t(43)),u=t(9),l=(t(167),t(90)),j=t.n(l),d=t(149),f=t(52),b=t(33),h=t(91),O=t(63),p=t(151),x=t.n(p),m=t(152),v=t.n(m),g=new Map;function w(e,n){console.log("Registering ".concat(e.peer));var t=e.peer;e.on("data",(function(e){return function(e,n){console.log("Received data ".concat(e));var t=new Blob([e.file],{type:e.filetype}),c=URL.createObjectURL(t),r=e.filename,i=new k(r,c);n(B(i))}(e,n)})),e.on("open",(function(){console.log("New connection opened")})),g.set(t,e),n(P(t))}function y(e){console.log("New peer");var n=function(){var e=v.a.generate({length:5,charset:"alphanumeric",capitalization:"uppercase",readable:!0});return"Pear-".concat(e)}();(c=new x.a(n,{secure:!0})).on("open",(function(n){e(_(n))})),c.on("connection",(function(n){w(n,e)})),c.on("close",(function(){e(A())}))}var C=t(310),k=function e(n,t){Object(h.a)(this,e),this.name=void 0,this.url=void 0,this.name=n,this.url=t},S=function e(n,t,c){Object(h.a)(this,e),this.id=void 0,this.name=void 0,this.url=void 0,this.id=n,this.name=t,this.url=c},N=Object(O.b)({name:"counter",initialState:{id:"",connections:[],files:[]},reducers:{setId:function(e,n){e.id=n.payload},newConnection:function(e,n){e.connections.push(n.payload)},disconnect:function(e){e.connections=[],e.id=""},addFile:function(e,n){var t=n.payload,c=Object(C.a)(),r=new S(c,t.name,t.url);e.files.push(r)}}}),T=N.actions,_=T.setId,P=T.newConnection,A=T.disconnect,B=T.addFile,R=function(e){return function(n){return function(e,n){if(void 0!=c){var t=c.connect(e);console.log("Connecting to ".concat(e)),w(t,n)}}(e,n)}},U=function(e,n){return function(t){return function(e,n,t){e.map((function(e){var t=g.get(e);void 0!=t&&(console.log("Sending file ".concat(n.name," to ").concat(e)),t.send({file:n,filename:n.name,filetype:n.type}))}))}(e,n)}},F=function(e){return e.transfer.id},L=function(e){return e.transfer.connections},M=function(e){return e.transfer.files},E=N.reducer,H=t(153),I=t.n(H),W=t(309),D=t(2);function G(){var e=Object(b.c)(F),n=Object(b.c)(L),t=Object(b.c)(M),c=Object(b.b)(),i=Object(r.useState)(""),o=Object(f.a)(i,2),a=o[0],s=o[1],l=Object(r.useState)(""),h=Object(f.a)(l,2),O=(h[0],h[1],Object(u.f)().search),p=(new URLSearchParams(O).get("id"),function(){var e=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=t&&null!=(r=t.item(0))&&c(U(n,r));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return Object(D.jsxs)("div",{className:I.a.transfer,children:[Object(D.jsx)("img",{src:"/PearTransfer/pear2pear.png",className:"App-logo",alt:"logo",width:"20%"}),Object(D.jsx)("h1",{children:"Pear transfer"}),Object(D.jsxs)("div",{children:[e||"Please click 'Create pear'",Object(D.jsx)("br",{}),Object(D.jsx)(W.a,{variant:"contained",color:"primary",onClick:function(){return c((function(e){return y(e)}))},children:"Create pear"}),Object(D.jsx)("br",{}),Object(D.jsx)("input",{type:"text",placeholder:"Other person's id",onChange:function(e){return s(e.target.value)}}),Object(D.jsx)("br",{}),Object(D.jsx)(W.a,{variant:"contained",color:"primary",onClick:function(e){return c(R(a))},children:"Connect"}),Object(D.jsx)("br",{}),n.map((function(e,n){return Object(D.jsx)("div",{children:e},n)})),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{children:["File upload",Object(D.jsx)("br",{}),Object(D.jsx)("input",{type:"file",onChange:function(e){return p(e.target.files)}})]}),Object(D.jsx)("br",{}),Object(D.jsx)("p",{children:"Files"}),Object(D.jsx)("br",{}),t.map((function(e,n){return Object(D.jsx)("div",{children:Object(D.jsx)("a",{href:e.url,download:e.name,children:e.name})},e.id)}))]})]})}var J=t(312),z=t(159),K=Object(J.a)(Object(z.a)({palette:{type:"dark",primary:{main:"#849719"},secondary:{main:"#fdd186"}}})),$=t(304),q=t(158),Q=t.n(q),V=t(311);function X(){var e=i.a.useState(!1),n=Object(f.a)(e,2),t=n[0],c=n[1];return Object(D.jsx)($.a,{theme:K,children:Object(D.jsxs)("div",{className:Q.a.about,children:[Object(D.jsx)("h1",{children:"Welcome to PearTransfer"}),Object(D.jsx)("p",{children:"The \ud83c\udf502\ud83c\udf50 files transfer app!"}),Object(D.jsxs)(W.a,{onClick:function(){c((function(e){return!e}))},variant:"contained",color:"primary",children:[t?"Hide":"Show"," Special Thanks"]}),Object(D.jsxs)(V.a,{in:t,children:[Object(D.jsx)("p",{children:"Theme idea: Alejandro Khabarov"}),Object(D.jsx)("p",{children:"Logo: Simon Cardinal"})]})]})})}var Y=t(305),Z=t(306),ee=t(313),ne=t(307),te=t(308),ce=Object(Y.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},titleButton:{textTransform:"none"}}}));var re=function(){var e=ce();return Object(D.jsx)("div",{children:Object(D.jsx)(i.a.StrictMode,{children:Object(D.jsx)($.a,{theme:K,children:Object(D.jsx)(Z.a,{children:Object(D.jsxs)(s.a,{children:[Object(D.jsx)(ee.a,{position:"static",children:Object(D.jsxs)(ne.a,{children:[Object(D.jsx)(s.b,{to:"/",className:e.title,children:Object(D.jsx)(W.a,{className:e.titleButton,children:Object(D.jsx)(te.a,{variant:"h6",children:"Pear Transfer"})})}),Object(D.jsx)(s.b,{to:"/",children:Object(D.jsx)(W.a,{children:"Home"})}),Object(D.jsx)(s.b,{to:"/about",children:Object(D.jsx)(W.a,{children:"About"})})]})}),Object(D.jsxs)(u.c,{children:[Object(D.jsx)(u.a,{path:"/about",children:Object(D.jsx)(X,{})}),Object(D.jsx)(u.a,{path:"/",children:Object(D.jsx)(G,{})})]})]})})})})})},ie=Object(O.a)({reducer:{transfer:E}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(283);a.a.render(Object(D.jsx)(i.a.StrictMode,{children:Object(D.jsx)(b.a,{store:ie,children:Object(D.jsx)(re,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[284,1,2]]]);
//# sourceMappingURL=main.d1c9996d.chunk.js.map