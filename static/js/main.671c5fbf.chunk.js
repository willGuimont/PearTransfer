(this["webpackJsonpour-data"]=this["webpackJsonpour-data"]||[]).push([[0],{16:function(n,e,t){n.exports={peerId:"Transfer_peerId__1kcQP"}},21:function(n,e,t){},29:function(n,e){function t(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=29},31:function(n,e,t){},32:function(n,e,t){"use strict";t.r(e);var c,o=t(0),r=t.n(o),i=t(4),a=t.n(i),s=(t(21),t(8)),u=t.n(s),l=t(13),d=t(12),f=t(3),j=t(11),b=t(5),h=t(15),p=t.n(h),O=new Map;function v(n,e){console.log("Registering ".concat(n.peer));var t=n.peer;n.on("data",(function(n){return function(n,e){console.log("Received data ".concat(n));var t=new Blob([n.file],{type:n.filetype}),c=URL.createObjectURL(t),o=n.filename,r=new m(o,c);e(I(r))}(n,e)})),n.on("open",(function(){console.log("New connection opened")})),O.set(t,n),e(C(t))}var x=t(34),m=function n(e,t){Object(j.a)(this,n),this.name=void 0,this.url=void 0,this.name=e,this.url=t},w=function n(e,t,c){Object(j.a)(this,n),this.id=void 0,this.name=void 0,this.url=void 0,this.id=e,this.name=t,this.url=c},g=Object(b.b)({name:"counter",initialState:{id:"",connections:[],files:[]},reducers:{setId:function(n,e){n.id=e.payload},newConnection:function(n,e){n.connections.push(e.payload)},disconnect:function(n){n.connections=[],n.id=""},addFile:function(n,e){var t=e.payload,c=Object(x.a)(),o=new w(c,t.name,t.url);n.files.push(o)}}}),y=g.actions,k=y.setId,C=y.newConnection,N=y.disconnect,I=y.addFile,F=function(){return function(n){return function(n){console.log("New peer"),(c=new p.a).on("open",(function(e){n(k(e))})),c.on("connection",(function(e){v(e,n)})),c.on("close",(function(){n(N())}))}(n)}},S=function(n){return function(e){return function(n,e){if(void 0!=c){var t=c.connect(n);console.log("Connecting to ".concat(n)),v(t,e)}}(n,e)}},_=function(n,e){return function(t){return function(n,e,t){n.map((function(n){var t=O.get(n);void 0!=t&&(console.log("Sending file ".concat(e.name," to ").concat(n)),t.send({file:e,filename:e.name,filetype:e.type}))}))}(n,e)}},P=function(n){return n.transfer.id},R=function(n){return n.transfer.connections},U=function(n){return n.transfer.files},B=g.reducer,E=t(16),L=t.n(E),M=t(1);function A(){var n=Object(f.c)(P),e=Object(f.c)(R),t=Object(f.c)(U),c=Object(f.b)(),r=Object(o.useState)(""),i=Object(d.a)(r,2),a=i[0],s=i[1],j=Object(o.useState)(""),b=Object(d.a)(j,2),h=(b[0],b[1],function(){var n=Object(l.a)(u.a.mark((function n(t){var o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null!=t&&null!=(o=t.item(0))&&c(_(e,o));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return Object(M.jsxs)("div",{children:["Peer id:",Object(M.jsxs)("div",{className:L.a.peerId,children:[n||"Please click to create Peer",Object(M.jsx)("br",{}),Object(M.jsx)("button",{onClick:function(){return c(F())},children:"Create peer"}),Object(M.jsx)("br",{}),Object(M.jsx)("input",{type:"text",placeholder:"Other person's id",onChange:function(n){return s(n.target.value)}}),Object(M.jsx)("br",{}),Object(M.jsx)("button",{onClick:function(n){return c(S(a))},children:"Connect"}),Object(M.jsx)("br",{}),e.map((function(n,e){return Object(M.jsx)("div",{children:n},e)})),Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),Object(M.jsxs)("label",{children:["File:",Object(M.jsx)("input",{type:"file",onChange:function(n){return h(n.target.files)}})]}),Object(M.jsx)("br",{}),Object(M.jsx)("p",{children:"Files"}),Object(M.jsx)("br",{}),t.map((function(n,e){return Object(M.jsx)("div",{children:Object(M.jsx)("a",{href:n.url,download:n.name,children:n.name})},n.id)}))]})]})}t(31);var D=function(){return Object(M.jsx)("div",{className:"App",children:Object(M.jsx)("header",{className:"App-header",children:Object(M.jsx)(A,{})})})},J=Object(b.a)({reducer:{transfer:B}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsx)(f.a,{store:J,children:Object(M.jsx)(D,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.671c5fbf.chunk.js.map